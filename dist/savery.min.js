!(function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("savery",[],t):"object"==typeof exports?exports.savery=t():e.savery=t()})(this,(function(){return (function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)})([function(e,t,o){e.exports=o(1)},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};o(2);var a=o(3),s=n(a),c=o(5),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"download.txt",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.type,n=r(t,["type"]),a=(0,c.getMimeType)(o,e);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new s.default(t,e,i({},n,{mimeType:a}))}};u.save=function(e,t,o){var n=u(t,o);return n(e).save()},t.default=u,e.exports=t.default},function(e,t){/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
!(function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(t){}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||(function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},o=function(){this.data=[]},n=function(e,t,o){this.data=e,this.size=e.length,this.type=t,this.encoding=o},r=o.prototype,i=n.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},c="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=c.length,l=e.URL||e.webkitURL||e,p=l.createObjectURL,f=l.revokeObjectURL,d=l,v=e.btoa,h=e.atob,E=e.ArrayBuffer,S=e.Uint8Array,m=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=i.fake=!0;u--;)s.prototype[c[u]]=u+1;return l.createObjectURL||(d=e.URL=function(e){var t,o=document.createElementNS("http://www.w3.org/1999/xhtml","a");return o.href=e,"origin"in o||("data:"===o.protocol.toLowerCase()?o.origin=null:(t=e.match(m),o.origin=t&&t[1])),o}),d.createObjectURL=function(e){var t,o=e.type;return null===o&&(o="application/octet-stream"),e instanceof n?(t="data:"+o,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):v?t+";base64,"+v(e.data):t+","+encodeURIComponent(e.data)):p?p.call(l,e):void 0},d.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&f&&f.call(l,e)},r.append=function(e){var o=this.data;if(S&&(e instanceof E||e instanceof S)){for(var r="",i=new S(e),c=0,u=i.length;c<u;c++)r+=String.fromCharCode(i[c]);o.push(r)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var l=new a;o.push(l.readAsBinaryString(e))}else e instanceof n?"base64"===e.encoding&&h?o.push(h(e.data)):"URI"===e.encoding?o.push(decodeURIComponent(e.data)):"raw"===e.encoding&&o.push(e.data):("string"!=typeof e&&(e+=""),o.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new n(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},i.slice=function(e,t,o){var r=arguments.length;return r<3&&(o=null),new n(this.data.slice(e,r>1?t:this.data.length),o,this.encoding)},i.toString=function(){return"[object Blob]"},i.close=function(){this.size=0,delete this.data},o})(e);e.Blob=function(e,t){var n=t?t.type||"":"",r=new o;if(e)for(var i=0,a=e.length;i<a;i++)Uint8Array&&e[i]instanceof Uint8Array?r.append(e[i].buffer):r.append(e[i]);var s=r.getBlob(n);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=n(new e.Blob)})("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}})(),i=o(4),a=o(5),s=(function(){function e(t,o){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(this,e),this.autoBOM=!0,this.data=null,this.error=null,this.filename="",this.forceLoad=!1,this.onAbort=a.noop,this.onAfterSave=a.passThrough,this.onBeforeSave=a.passThrough,this.onEndSave=a.noop,this.onError=a.noop,this.onStartSave=a.noop,this.size=0,this.status=i.STATUSES.PENDING,this.mimeType=i.DEFAULT_MIME_TYPE,this._onAfterSave=function(){return r.status!==i.STATUSES.COMPLETE?Promise.reject(r):r.onAfterSave(r)},this._onBeforeSave=function(){return r.status!==i.STATUSES.PENDING?Promise.reject(r):r.onBeforeSave(r.data)},this._onCreateFile=function(){if(r.status!==i.STATUSES.PROCESSING)return Promise.reject(r);var e=(0,a.createBlob)(r.data,r.mimeType),t=r.autoBOM?(0,a.setAutoBom)(e):e,o=(0,a.createObjectUrl)(t);return r.size=e.size,{file:t,objectUrl:o}},this._onEndSave=function(e){return r.status!==i.STATUSES.PROCESSING?Promise.reject(r):((0,a.revokeObjectUrl)(e),r.status=i.STATUSES.COMPLETE,r.onEndSave(r),e)},this._onError=function(e){return r.status!==i.STATUSES.CANCELLED&&(r.status=i.STATUSES.ERROR),r.onError(e),Promise.reject(e)},this._onSave=function(e){if(r.status!==i.STATUSES.PROCESSING)return Promise.reject(r);var t=e.file,o=e.objectUrl;return i.HAS_MSSAVEBLOB_SUPPORT?((0,a.saveWithSaveMsBlob)(t,r.filename),o):i.HAS_DOWNLOAD_ATTRIBUTE_SUPPORT?((0,a.saveWithDownloadAttribute)(o,r.filename),o):i.IS_CHROME_OR_IOS||r.forceLoad&&i.IS_SAFARI||i.GLOBAL.FileReader?(0,a.saveWithFileReader)(t):(r.forceLoad?i.GLOBAL.location.href=o:(0,a.openPopupOrNavigate)(o),r.status=i.STATUSES.COMPLETE,o)},this._onStartSave=function(){return r.status!==i.STATUSES.PENDING?Promise.reject(r):(r.status=i.STATUSES.PROCESSING,r.onStartSave(r),r)};var c=s.mimeType,u=s.onAbort,l=void 0===u?a.noop:u,p=s.onAfterSave,f=void 0===p?a.passThrough:p,d=s.onBeforeSave,v=void 0===d?a.passThrough:d,h=s.onError,E=void 0===h?a.noop:h,S=s.onStartSave,m=void 0===S?a.noop:S,R=s.onEndSave,O=void 0===R?a.noop:R,g=s.shouldAutoBom,b=void 0===g||g;return this.autoBOM=b,this.data=t,this.error=null,this.filename=o,this.forceLoad=c===i.DEFAULT_MIME_TYPE,this.mimeType=c,this.onAbort=l,this.onAfterSave=f,this.onBeforeSave=v,this.onError=E,this.onStartSave=m,this.onEndSave=O,this}return r(e,[{key:"abort",value:function(){return this.status===i.STATUSES.PENDING||this.status===i.STATUSES.PROCESSING?(this.status=i.STATUSES.CANCELLED,this.error=new Error("Savery for "+this.filename+" was aborted."),this.onAbort(this),this):(this.error=new Error("Savery has already completed for "+this.filename+"."),Promise.reject(this))}},{key:"save",value:function(){return Promise.resolve().then(this._onBeforeSave).then(this._onStartSave).then(this._onCreateFile).then(this._onSave).then(this._onEndSave).then(this._onAfterSave).catch(this._onError)}}]),e})();t.default=s,e.exports=t.default},function(e,t){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="application/octet-stream",n=/^[a-zA-Z\-]+\/([a-zA-Z0-9.\-+]+)+$/,r={CANCELLED:"CANCELLED",COMPLETE:"COMPLETE",ERROR:"ERROR",PENDING:"PENDING",PROCESSING:"PROCESSING"},i=window||e,a=i.document,s=i.URL||i.webkitURL,c=a.createElementNS("http://www.w3.org/1999/xhtml","a"),u=/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i,l=/CriOS\/[\d]+/,p=/^data:[^;]*;/,f=/constructor/i,d="download"in c,v=!(!i.navigator||!i.navigator.msSaveBlob),h=l.test(i.navigator.userAgent),E=f.test(i.HTMLElement)||i.safari,S=3e4;t.AUTO_BOM_REGEXP=u,t.CHROME_OR_IOS_REGEXP=l,t.DEFAULT_MIME_TYPE=o,t.GLOBAL=i,t.HAS_DOWNLOAD_ATTRIBUTE_SUPPORT=d,t.HAS_MSSAVEBLOB_SUPPORT=v,t.IS_CHROME_OR_IOS=h,t.IS_SAFARI=E,t.LINK=c,t.MIME_TYPE_REGEXP=n,t.READER_REPLACE_REGEXP=p,t.REVOKE_TIMEOUT=S,t.SAFARI_REGEXP=f,t.STATUSES=r,t.URL=s}).call(t,(function(){return this})())},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setAutoBom=t.saveWithSaveMsBlob=t.saveWithFileReader=t.saveWithDownloadAttribute=t.triggerClick=t.revokeObjectUrl=t.passThrough=t.openPopupOrNavigate=t.noop=t.getMimeType=t.createObjectUrl=t.createBlob=void 0;var n=o(4),r=o(6),i="Displaying new document\n\n Use Save As... to download, then click back in your browser to return to this page.",a=function(e,t){return new n.GLOBAL.Blob([e],{type:t})};t.createBlob=a;var s=function(e){return URL.createObjectURL(e)};t.createObjectUrl=s;var c=function(e,t){if(!e){var o=t.slice(t.lastIndexOf(".")+1).toLowerCase();return r.lookup(o)||n.DEFAULT_MIME_TYPE}var i=e.toLowerCase();if(n.MIME_TYPE_REGEXP.test(i.split(";")[0]))return i;var a=r.lookup(i);return a?a:n.DEFAULT_MIME_TYPE};t.getMimeType=c;var u=function(){return null};t.noop=u;var l=function(e){var t=n.GLOBAL.open(e,"_blank");t||confirm(i)&&(n.GLOBAL.location.href=e)};t.openPopupOrNavigate=l;var p=function(e){return e};t.passThrough=p;var f=function(e){setTimeout((function(){"string"==typeof e?URL.revokeObjectURL(e):e.remove()}),n.REVOKE_TIMEOUT)};t.revokeObjectUrl=f;var d=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)};t.triggerClick=d;var v=function(e,t){n.LINK.href=e,n.LINK.download=t,d(n.LINK)};t.saveWithDownloadAttribute=v;var h=function(e){return e?new Promise(function(t){var o=new n.GLOBAL.FileReader;o.onloadend=function(){var e=n.IS_CHROME_OR_IOS?o.result:o.result.replace(n.READER_REPLACE_REGEXP,"data:attachment/file;");l(e),t(e)},o.readAsDataURL(e)}):Promise.reject(new Error("No data provided to FileReader."))};t.saveWithFileReader=h;var E=function(e,t){n.GLOBAL.navigator.msSaveBlob(e,t)};t.saveWithSaveMsBlob=E;var S=function(e){return n.AUTO_BOM_REGEXP.test(e.type)?new n.GLOBAL.Blob([String.fromCharCode(65279),e],{type:e.type}):e};t.setAutoBom=S},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={"7z":"application/x-7z-compressed",bmp:"image/bmp",conf:"text/plain",css:"text/css",csv:"text/csv",dmg:"application/x-apple-diskimage",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",gif:"image/gif",gz:"application/x-gzip",html:"text/html",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",log:"text/plain",map:"application/json",mov:"video/quicktime",mp3:"audio/mp3",mp4:"video/mp4",oga:"audio/ogg",ogg:"audio/ogg",ogv:"video/ogg",pdf:"application/pdf",png:"image/png",ps:"application/postscript",pps:"application/vnd.ms-powerpoint",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",psd:"image/vnd.adobe.photoshop",qt:"video/quicktime",rar:"application/x-rar-compressed",rtf:"text/rtf",svg:"image/svg+xml",text:"text/plain",torrent:"application/x-bittorrent",txt:"text/plain",tiff:"image/tiff",war:"application/java-archive",weba:"audio/webm",webm:"video/webm",webp:"image/webp",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",zip:"application/zip"},n=function(e){return o[e]||""};t.default={lookup:n},e.exports=t.default}])}));