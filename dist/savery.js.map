{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap aaf2216668af574d50a7","webpack:///./src/index.js","webpack:///./src/Savery.js","webpack:///./src/constants.js","webpack:///./src/utils.js","webpack:///./src/mime.js"],"names":["saveFile","fileName","options","type","restOfOptions","mimeType","data","Savery","name","autoBOM","error","filename","forceLoad","onAbort","onAfterSave","onBeforeSave","onEndSave","onError","onStartSave","size","status","PENDING","_onAfterSave","COMPLETE","Promise","reject","_onBeforeSave","_onEndSave","objectUrl","PROCESSING","_onError","CANCELLED","ERROR","_onSave","blob","file","FileReader","location","href","_onStartSave","shouldAutoBom","Error","resolve","then","catch","DEFAULT_MIME_TYPE","MIME_TYPE_REGEXP","STATUSES","GLOBAL","window","global","DOCUMENT","document","URL","webkitURL","LINK","createElementNS","AUTO_BOM_REGEXP","CHROME_OR_IOS_REGEXP","READER_REPLACE_REGEXP","SAFARI_REGEXP","HAS_DOWNLOAD_ATTRIBUTE_SUPPORT","IS_CHROME_OR_IOS","test","navigator","userAgent","IS_SAFARI","HTMLElement","safari","REVOKE_TIMEOUT","mime","require","createBlob","Blob","createObjectUrl","createObjectURL","getMimeType","passedMimeType","fileExtension","slice","lastIndexOf","toLowerCase","lookup","lowerCaseMimeType","split","searchedMimeType","noop","openPopupOrNavigate","url","popup","open","passThrough","object","revokeObjectUrl","setTimeout","revokeObjectURL","remove","triggerClick","node","event","MouseEvent","dispatchEvent","saveWithDownloadAttribute","download","saveWithFileReader","reader","onloadend","result","replace","readAsDataURL","setAutoBom","String","fromCharCode","MIME_TYPES","bmp","conf","css","csv","dmg","doc","docx","gif","gz","html","jar","jpeg","jpg","js","json","log","map","mov","mp3","mp4","oga","ogg","ogv","pdf","png","ps","pps","ppt","pptx","psd","qt","rar","rtf","svg","text","torrent","txt","tiff","war","weba","webm","webp","xls","xlsx","zip","extension"],"mappings":"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","file":"savery.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"savery\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"savery\"] = factory();\n\telse\n\t\troot[\"savery\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap aaf2216668af574d50a7\n **/","// @flow\n\n// main class\nimport Savery from './Savery';\n\n// utils\nimport {\n  getMimeType\n} from './utils';\n\n// types\nimport type {\n  Options,\n  Savery as SaveryType\n} from './types';\n\n/**\n * return function that will receive data and trigger saveAs\n *\n * @param {string} fileName=download\n * @param {object} options\n * @param {function} [options.onAbort]\n * @param {function} [options.onAfterSave]\n * @param {function} [options.onBeforeSave]\n * @param {function} [options.onError]\n * @param {function} [options.onProgress]\n * @param {function} [options.onWrite]\n * @param {function} [options.onWriteStart]\n * @param {string} [options.type]\n * @returns {function(data: *): void}\n */\nconst saveFile = (fileName: string = 'download.txt', options: Options = {}): Function => {\n  const {\n    type,\n    ...restOfOptions\n  } = options;\n  const mimeType: string = getMimeType(type, fileName);\n\n  return (data: any = null): SaveryType => {\n    return new Savery(data, fileName, {\n      ...restOfOptions,\n      mimeType\n    });\n  };\n};\n\nexport default saveFile;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","// @flow\n\n// constants {\nimport {\n  DEFAULT_MIME_TYPE,\n  GLOBAL,\n  HAS_DOWNLOAD_ATTRIBUTE_SUPPORT,\n  IS_CHROME_OR_IOS,\n  IS_SAFARI,\n  STATUSES\n} from './constants';\n\n// utils\nimport {\n  createBlob,\n  createObjectUrl,\n  noop,\n  openPopupOrNavigate,\n  passThrough,\n  revokeObjectUrl,\n  saveWithDownloadAttribute,\n  saveWithFileReader,\n  setAutoBom\n} from './utils';\n\n// types\nimport type {\n  Options,\n  Savery as SaveryType\n} from './types';\n\nclass Savery {\n  constructor(data: any, name: string, options: Options = {}): SaveryType {\n    const {\n      mimeType,\n      onAbort = noop,\n      onAfterSave = passThrough,\n      onBeforeSave = passThrough,\n      onError = noop,\n      onStartSave = noop,\n      onEndSave = noop,\n      shouldAutoBom = true\n    } = options;\n\n    this.autoBOM = shouldAutoBom;\n    this.data = data;\n    this.error = null;\n    this.filename = name;\n    this.forceLoad = mimeType === DEFAULT_MIME_TYPE;\n    this.mimeType = mimeType;\n\n    this.onAbort = onAbort;\n    this.onAfterSave = onAfterSave;\n    this.onBeforeSave = onBeforeSave;\n    this.onError = onError;\n    this.onStartSave = onStartSave;\n    this.onEndSave = onEndSave;\n\n    return this;\n  }\n\n  autoBOM: boolean = true;\n  data: any = null;\n  error: ?Error = null;\n  filename: string = '';\n  forceLoad: boolean = false;\n  onAbort: Function = noop;\n  onAfterSave: Function = passThrough;\n  onBeforeSave: Function = passThrough;\n  onEndSave: Function = noop;\n  onError: Function = noop;\n  onStartSave: Function = noop;\n  size: number = 0;\n  status: string = STATUSES.PENDING;\n  mimeType: string = DEFAULT_MIME_TYPE;\n\n  /**\n   * execute the onAfterSave method and return the results\n   *\n   * @returns {*}\n   * @private\n   */\n  _onAfterSave = (): any => {\n    if (this.status !== STATUSES.COMPLETE) {\n      return Promise.reject(this);\n    }\n\n    return this.onAfterSave(this);\n  };\n\n  /**\n   * execute the onBeforeSave method and return the results\n   *\n   * @returns {*}\n   * @private\n   */\n  _onBeforeSave = (): any => {\n    if (this.status !== STATUSES.PENDING) {\n      return Promise.reject(this);\n    }\n\n    return this.onBeforeSave(this.data);\n  };\n\n  /**\n   * trigger the end of the save process\n   *\n   * @param {string} objectUrl\n   * @returns {string|Promise}\n   * @private\n   */\n  _onEndSave = (objectUrl: string): string|Promise<any> => {\n    if (this.status !== STATUSES.PROCESSING) {\n      return Promise.reject(this);\n    }\n\n    revokeObjectUrl(objectUrl);\n\n    this.status = STATUSES.COMPLETE;\n    this.onEndSave(this);\n\n    return objectUrl;\n  };\n\n  /**\n   * trigger the onError method and reject the promise\n   *\n   * @param {Error} error\n   * @returns {Savery|Promise}\n   * @private\n   */\n  _onError = (error: ?Error) => {\n    if (this.status !== STATUSES.CANCELLED) {\n      this.status = STATUSES.ERROR;\n    }\n\n    this.onError(error);\n\n    return Promise.reject(error);\n  };\n\n  /**\n   * save the file based on browser capabilities\n   *\n   * @returns {string|Promise}\n   * @private\n   */\n  _onSave = () => {\n    if (this.status !== STATUSES.PROCESSING) {\n      return Promise.reject(this);\n    }\n\n    const blob: Blob = createBlob(this.data, this.mimeType);\n    const file: Blob = this.autoBOM ? setAutoBom(blob) : blob;\n    const objectUrl: string = createObjectUrl(file);\n\n    this.size = blob.size;\n\n    if (HAS_DOWNLOAD_ATTRIBUTE_SUPPORT) {\n      saveWithDownloadAttribute(objectUrl, this.filename);\n\n      return objectUrl;\n    }\n\n    if ((IS_CHROME_OR_IOS || (this.forceLoad && IS_SAFARI)) || GLOBAL.FileReader) {\n      return saveWithFileReader(file);\n    }\n\n    if (this.forceLoad) {\n      GLOBAL.location.href = objectUrl;\n    } else {\n      openPopupOrNavigate(objectUrl);\n    }\n\n    this.status = STATUSES.COMPLETE;\n\n    return objectUrl;\n  };\n\n  /**\n   * trigger the beginning of the save process\n   *\n   * @returns {Savery|Promise}\n   * @private\n   */\n  _onStartSave = (): Promise<string>|string => {\n    if (this.status !== STATUSES.PENDING) {\n      return Promise.reject(this);\n    }\n\n    this.status = STATUSES.PROCESSING;\n    this.onStartSave(this);\n\n    return this;\n  };\n\n  /**\n   * abort the save process\n   *\n   * @returns {Savery|Promise}\n   */\n  abort() {\n    if (this.status === STATUSES.PENDING || this.status === STATUSES.PROCESSING) {\n      this.status = STATUSES.CANCELLED;\n      this.error = new Error(`Savery for ${this.filename} was aborted.`);\n\n      this.onAbort(this);\n\n      return this;\n    }\n\n    this.error = new Error(`Savery has already completed for ${this.filename}.`);\n\n    return Promise.reject(this);\n  }\n\n  /**\n   * execute the saving of the file\n   *\n   * @returns {Promise}\n   */\n  save() {\n    return Promise.resolve()\n      .then(this._onBeforeSave)\n      .then(this._onStartSave)\n      .then(this._onSave)\n      .then(this._onEndSave)\n      .then(this._onAfterSave)\n      .catch(this._onError);\n  }\n}\n\nexport default Savery;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Savery.js\n **/","// @flow\n\nimport type {\n  Statuses\n} from './types';\n\nconst DEFAULT_MIME_TYPE: string = 'application/octet-stream';\nconst MIME_TYPE_REGEXP: RegExp = /^[a-zA-Z\\-]+\\/([a-zA-Z0-9.\\-+]+)+$/;\n\nconst STATUSES: Statuses = {\n  CANCELLED: 'CANCELLED',\n  COMPLETE: 'COMPLETE',\n  ERROR: 'ERROR',\n  PENDING: 'PENDING',\n  PROCESSING: 'PROCESSING'\n};\n\nconst GLOBAL: Object = window || global;\nconst DOCUMENT: Object = GLOBAL.document;\n\nconst URL: Object = GLOBAL.URL || GLOBAL.webkitURL;\nconst LINK: HTMLAnchorElement = DOCUMENT.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n\nconst AUTO_BOM_REGEXP = /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i;\nconst CHROME_OR_IOS_REGEXP = /CriOS\\/[\\d]+/;\nconst READER_REPLACE_REGEXP = /^data:[^;]*;/;\nconst SAFARI_REGEXP = /constructor/i;\n\nconst HAS_DOWNLOAD_ATTRIBUTE_SUPPORT: boolean = 'download' in LINK;\nconst IS_CHROME_OR_IOS: boolean = CHROME_OR_IOS_REGEXP.test(GLOBAL.navigator.userAgent);\nconst IS_SAFARI: boolean = SAFARI_REGEXP.test(GLOBAL.HTMLElement) || GLOBAL.safari;\n\nconst REVOKE_TIMEOUT: number = 30000;\n\nexport {AUTO_BOM_REGEXP};\nexport {CHROME_OR_IOS_REGEXP};\nexport {DEFAULT_MIME_TYPE};\nexport {GLOBAL};\nexport {HAS_DOWNLOAD_ATTRIBUTE_SUPPORT};\nexport {IS_CHROME_OR_IOS};\nexport {IS_SAFARI};\nexport {LINK};\nexport {MIME_TYPE_REGEXP};\nexport {READER_REPLACE_REGEXP};\nexport {REVOKE_TIMEOUT};\nexport {SAFARI_REGEXP};\nexport {STATUSES};\nexport {URL};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constants.js\n **/","// @flow\n\n// constants\nimport {\n  AUTO_BOM_REGEXP,\n  DEFAULT_MIME_TYPE,\n  GLOBAL,\n  IS_CHROME_OR_IOS,\n  LINK,\n  MIME_TYPE_REGEXP,\n  READER_REPLACE_REGEXP,\n  REVOKE_TIMEOUT\n} from './constants';\n\n// conditional dependencies\nconst mime = process.env.SAVERY === 'full' ? require('mime-types') : require('./mime');\n\n/**\n * generate a new blob based on the data and MIME type\n *\n * @param {*} data\n * @param {string} mimeType\n * @returns {Blob}\n */\nconst createBlob = (data: any, mimeType: string): Blob => {\n  return new window.Blob([data], {\n    type: mimeType\n  });\n};\n\nexport {createBlob};\n\n/**\n * create the objectUrl with the window URL object\n *\n * @param {Blob} blob\n * @returns {string}\n */\nconst createObjectUrl = (blob: Blob): string => {\n  return URL.createObjectURL(blob);\n};\n\nexport {createObjectUrl};\n\n/**\n * get the MIME type of the file\n *\n * if the MIME type was explicitly passed, check if it exists in our list, and if not\n * check to see if it can be used directly (as in someone passed in the full MIME type)\n *\n * if no MIME type is passed, intuit the type from the file extension, and if that type\n * does not exist in our list then fall back to the DEFAULT_MIME_TYPE\n *\n * @param {string} passedMimeType\n * @param {string} fileName\n * @returns {string}\n */\nconst getMimeType = (passedMimeType: ?string, fileName: string): string => {\n  if (!passedMimeType) {\n    const fileExtension: string = fileName.slice(fileName.lastIndexOf('.') + 1).toLowerCase();\n\n    return mime.lookup(fileExtension) || DEFAULT_MIME_TYPE;\n  }\n\n  const lowerCaseMimeType: string = passedMimeType.toLowerCase();\n\n  if (MIME_TYPE_REGEXP.test(lowerCaseMimeType.split(';')[0])) {\n    return lowerCaseMimeType;\n  }\n\n  const searchedMimeType: string = mime.lookup(lowerCaseMimeType);\n\n  if (searchedMimeType) {\n    return searchedMimeType;\n  }\n\n  return DEFAULT_MIME_TYPE;\n};\n\nexport {getMimeType};\n\n/**\n * no-no function\n *\n * @returns {null}\n */\nconst noop = (): null => {\n  return null;\n};\n\nexport {noop};\n\n/**\n * either open a popup (if allowed) or navigate to the location\n *\n * @param {string} url\n */\nconst openPopupOrNavigate = (url: string) => {\n  const popup: Object = GLOBAL.open(url, '_blank');\n\n  if (!popup) {\n    GLOBAL.location.href = url;\n  }\n};\n\nexport {openPopupOrNavigate};\n\n/**\n * pass-through function\n *\n * @param {*} object\n * @returns {T}\n */\nconst passThrough = (object: any): any => {\n  return object;\n};\n\nexport {passThrough};\n\n/**\n * revoke the existing objectUrl\n *\n * @param {Object|string} file\n */\nconst revokeObjectUrl = (file: Object|string) => {\n  setTimeout(() => {\n    if (typeof file === 'string') {\n      URL.revokeObjectURL(file);\n    } else {\n      file.remove();\n    }\n  }, REVOKE_TIMEOUT);\n};\n\nexport {revokeObjectUrl};\n\n/**\n * trigger a click event for the given node\n *\n * @param {HTMLAnchorElement} node\n */\nconst triggerClick = (node: HTMLElement) => {\n  const event: MouseEvent = new MouseEvent('click');\n\n  node.dispatchEvent(event);\n};\n\nexport {triggerClick};\n\n/**\n * use the download attribute to trigger save\n *\n * @param {string} objectUrl\n * @param {string} name\n */\nconst saveWithDownloadAttribute = (objectUrl: string, name: string) => {\n  LINK.href = objectUrl;\n  LINK.download = name;\n\n  triggerClick(LINK);\n};\n\nexport {saveWithDownloadAttribute};\n\n/**\n * use the FileReader object (native) to trigger save\n *\n * @param {Blob} blob\n * @returns {Promise}\n */\nconst saveWithFileReader = (blob: Blob): Promise<string> => {\n  if (!blob) {\n    return Promise.reject(new Error('No data provided to FileReader.'));\n  }\n\n  return new Promise((resolve: Function) => {\n    const reader: FileReader = new window.FileReader();\n\n    reader.onloadend = function() {\n      const url = IS_CHROME_OR_IOS ? reader.result : reader.result.replace(READER_REPLACE_REGEXP, 'data:attachment/file;');\n\n      openPopupOrNavigate(url);\n\n      resolve(url);\n    };\n\n    reader.readAsDataURL(blob);\n  });\n};\n\nexport {saveWithFileReader};\n\n/**\n * set the BOM for the blob\n *\n * @param {Blob} blob\n * @param {string} blob.type\n * @returns {Blob}\n */\nconst setAutoBom = (blob: Blob): Blob => {\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (AUTO_BOM_REGEXP.test(blob.type)) {\n    return new window.Blob([String.fromCharCode(0xFEFF), blob], {\n      type: blob.type\n    });\n  }\n\n  return blob;\n};\n\nexport {setAutoBom};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","const MIME_TYPES = {\n  '7z': 'application/x-7z-compressed',\n  bmp: 'image/bmp',\n  conf: 'text/plain',\n  css: 'text/css',\n  csv: 'text/csv',\n  dmg: 'application/x-apple-diskimage',\n  doc: 'application/msword',\n  docx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  gif: 'image/gif',\n  gz: 'application/x-gzip',\n  html: 'text/html',\n  jar: 'application/java-archive',\n  jpeg: 'image/jpeg',\n  jpg: 'image/jpeg',\n  js: 'application/javascript',\n  json: 'application/json',\n  log: 'text/plain',\n  map: 'application/json',\n  mov: 'video/quicktime',\n  mp3: 'audio/mp3',\n  mp4: 'video/mp4',\n  oga: 'audio/ogg',\n  ogg: 'audio/ogg',\n  ogv: 'video/ogg',\n  pdf: 'application/pdf',\n  png: 'image/png',\n  ps: 'application/postscript',\n  pps: 'application/vnd.ms-powerpoint',\n  ppt: 'application/vnd.ms-powerpoint',\n  pptx: 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n  psd: 'image/vnd.adobe.photoshop',\n  qt: 'video/quicktime',\n  rar: 'application/x-rar-compressed',\n  rtf: 'text/rtf',\n  svg: 'image/svg+xml',\n  text: 'text/plain',\n  torrent: 'application/x-bittorrent',\n  txt: 'text/plain',\n  tiff: 'image/tiff',\n  war: 'application/java-archive',\n  weba: 'audio/webm',\n  webm: 'video/webm',\n  webp: 'image/webp',\n  xls: 'application/vnd.ms-excel',\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  zip: 'application/zip'\n};\n\n/**\n * lookup the mapped MIME type based on the extension provided\n *\n * @param {string} extension\n * @returns {string}\n */\nconst lookup = (extension: string): string => {\n  return MIME_TYPES[extension] || '';\n};\n\nexport default {\n  lookup\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/mime.js\n **/"],"sourceRoot":""}